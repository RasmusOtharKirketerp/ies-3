<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Status</title>
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .stat-card {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            background: #f9f9f9;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }

        .stat-label {
            color: #7f8c8d;
            height: 30px;
        }

        .error {
            color: #e74c3c;
        }

        .success {
            color: #27ae60;
        }

        .warning {
            color: #f39c12;
        }

        .refresh-button {
            padding: 10px 20px;
            margin: 20px 0;
            cursor: pointer;
        }
    </style>
    <script>
        function refreshStats() {
            location.reload();
        }
        // Auto refresh every 30 seconds
        setTimeout(refreshStats, 30000);
    </script>
</head>

<body>
    <h1>System Status</h1>
    <button onclick="refreshStats()" class="refresh-button">Refresh Stats</button>
    <div class="stats-container">
        <div class="stat-card">
            <h3>Articles Overview</h3>
            <div class="stat-value">{{ stats.downloaded_articles }}</div>
            <div class="stat-label">Downloaded Articles</div>

            <div class="stat-value">{{ stats.processed_articles }}</div>
            <div class="stat-label">Fully Processed Articles</div>


            <div class="stat-value">{{ stats.total_articles }}</div>
            <div class="stat-label">Total Articles</div>

        </div>

        <div class="stat-card">
            <h3>Processing Status</h3>

            <div class="stat-value {{ 'warning' if stats.pending_downloads > 0 else 'success' }}">{{
                stats.pending_downloads }}</div>
            <div class="stat-label">Pending Downloads</div>


            <div class="stat-value {{ 'warning' if stats.unrewritten_articles > 0 else 'success' }}">{{
                stats.unrewritten_articles }}</div>
            <div class="stat-label">Unrewritten Articles</div>

            <div class="stat-value {{ 'warning' if stats.unscored_articles > 0 else 'success' }}">{{
                stats.unscored_articles }}</div>
            <div class="stat-label">Unscored Articles</div>


        </div>

        <div class="stat-card">
            <h3>Scoring Stats</h3>
            <div class="stat-value">{{ "%.2f"|format(stats.avg_score) }}</div>
            <div class="stat-label">Average Score</div>
            <div class="stat-value">{{ stats.positive_scores }}</div>
            <div class="stat-label">Positive Scored Articles</div>
            <div class="stat-value">{{ stats.negative_scores }}</div>
            <div class="stat-label">Negative Scored Articles</div>
        </div>

        <div class="stat-card">
            <h3>Website Stats</h3>
            <div class="stat-value">{{ stats.active_websites }}</div>
            <div class="stat-label">Active Websites</div>
            <div class="stat-value">{{ stats.articles_today }}</div>
            <div class="stat-label">Articles Today</div>
            <div class="stat-value">{{ stats.articles_last_24h }}</div>
            <div class="stat-label">Articles Last 48h</div>
        </div>

        <div class="stat-card">
            <h3>Language Distribution</h3>
            {% for lang, count in stats.language_distribution.items() %}
            <div class="stat-value">{{ count }}</div>
            <div class="stat-label">{{ lang.upper() }} Articles</div>
            {% endfor %}
        </div>

        <div class="stat-card">
            <h3>System Health</h3>
            <div class="stat-value {{ 'success' if stats.system_healthy else 'error' }}">
                {{ "Healthy" if stats.system_healthy else "Work in progress..." }}
            </div>
            <div class="stat-label">System Status</div>
            <div class="stat-value">{{ stats.db_size }}</div>
            <div class="stat-label">Database Size</div>
        </div>
    </div>
</body>

</html>